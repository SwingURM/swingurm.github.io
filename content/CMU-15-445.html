<!DOCTYPE html>
<html lang="zh"><head><title>CMU 15-445</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Noto Serif Simplified Chinese:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="ğŸ§ Blog"/><meta property="og:title" content="CMU 15-445"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="CMU 15-445"/><meta name="twitter:description" content="data model å…³ç³»ï¼ŒK/Vï¼Œå›¾ç­‰ç­‰ schema entityå’Œä»–ä»¬çš„attribute relational algebraæ˜¯procedureçš„ SQL windows functionä¸ºæ¯ä¸€è¡Œè®¡ç®—ä¸€ä¸ªæ–°å€¼ï¼Ÿ å¯ä»¥ç”¨æ¥å¾—åˆ°è¡Œå·ï¼Œæ’årank mmap è®©OSè´Ÿè´£å†…å­˜å’Œå¤–å­˜çš„é¡µäº¤æ¢ ä¸å»ºè®® DBMSç®¡ç†ä¸€ç³»åˆ—çš„pageä½œä¸ºå­˜å‚¨å•å…ƒ ..."/><meta property="og:description" content="data model å…³ç³»ï¼ŒK/Vï¼Œå›¾ç­‰ç­‰ schema entityå’Œä»–ä»¬çš„attribute relational algebraæ˜¯procedureçš„ SQL windows functionä¸ºæ¯ä¸€è¡Œè®¡ç®—ä¸€ä¸ªæ–°å€¼ï¼Ÿ å¯ä»¥ç”¨æ¥å¾—åˆ°è¡Œå·ï¼Œæ’årank mmap è®©OSè´Ÿè´£å†…å­˜å’Œå¤–å­˜çš„é¡µäº¤æ¢ ä¸å»ºè®® DBMSç®¡ç†ä¸€ç³»åˆ—çš„pageä½œä¸ºå­˜å‚¨å•å…ƒ ..."/><meta property="og:image:type" content="image/webp"/><meta property="og:image:alt" content="data model å…³ç³»ï¼ŒK/Vï¼Œå›¾ç­‰ç­‰ schema entityå’Œä»–ä»¬çš„attribute relational algebraæ˜¯procedureçš„ SQL windows functionä¸ºæ¯ä¸€è¡Œè®¡ç®—ä¸€ä¸ªæ–°å€¼ï¼Ÿ å¯ä»¥ç”¨æ¥å¾—åˆ°è¡Œå·ï¼Œæ’årank mmap è®©OSè´Ÿè´£å†…å­˜å’Œå¤–å­˜çš„é¡µäº¤æ¢ ä¸å»ºè®® DBMSç®¡ç†ä¸€ç³»åˆ—çš„pageä½œä¸ºå­˜å‚¨å•å…ƒ ..."/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:url" content="https://swingurm.github.io/quartz/static/og-image.png"/><meta name="twitter:image" content="https://swingurm.github.io/quartz/static/og-image.png"/><meta property="og:image" content="https://swingurm.github.io/quartz/static/og-image.png"/><meta property="twitter:domain" content="swingurm.github.io/quartz"/><meta property="og:url" content="https://swingurm.github.io/quartz/CMU-15-445"/><meta property="twitter:url" content="https://swingurm.github.io/quartz/CMU-15-445"/><link rel="icon" href="./static/icon.png"/><meta name="description" content="data model å…³ç³»ï¼ŒK/Vï¼Œå›¾ç­‰ç­‰ schema entityå’Œä»–ä»¬çš„attribute relational algebraæ˜¯procedureçš„ SQL windows functionä¸ºæ¯ä¸€è¡Œè®¡ç®—ä¸€ä¸ªæ–°å€¼ï¼Ÿ å¯ä»¥ç”¨æ¥å¾—åˆ°è¡Œå·ï¼Œæ’årank mmap è®©OSè´Ÿè´£å†…å­˜å’Œå¤–å­˜çš„é¡µäº¤æ¢ ä¸å»ºè®® DBMSç®¡ç†ä¸€ç³»åˆ—çš„pageä½œä¸ºå­˜å‚¨å•å…ƒ ..."/><meta name="generator" content="Quartz"/><link href="./index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="./prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("./static/contentIndex.json").then(data => data.json())</script></head><body data-slug="CMU-15-445"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href=".">ğŸ§ Blog</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>æœç´¢</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="æœç´¢äº›ä»€ä¹ˆ" placeholder="æœç´¢äº›ä»€ä¹ˆ"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="æš—è‰²æ¨¡å¼"><title>æš—è‰²æ¨¡å¼</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="äº®è‰²æ¨¡å¼"><title>äº®è‰²æ¨¡å¼</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;æ•°æ®åº“&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;c++&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;Daily&quot;,&quot;collapsed&quot;:true}]" aria-controls="explorer-content" aria-expanded="false"><h2>æ¢ç´¢</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="æ•°æ®åº“"><button class="folder-button"><span class="folder-title">æ•°æ®åº“</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="æ•°æ®åº“"><li><a href="./æ•°æ®åº“/å¹¶å‘æ§åˆ¶" data-for="æ•°æ®åº“/å¹¶å‘æ§åˆ¶">å¹¶å‘æ§åˆ¶</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="c++"><button class="folder-button"><span class="folder-title">c++</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="c++"><li><a href="./c++/å®šä¹‰ä¸å£°æ˜" data-for="c++/å®šä¹‰ä¸å£°æ˜">å®šä¹‰ä¸å£°æ˜</a></li><li><a href="./c++/å­¦ä¹ èµ„æ–™" data-for="c++/å­¦ä¹ èµ„æ–™">å­¦ä¹ èµ„æ–™</a></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="Daily"><button class="folder-button"><span class="folder-title">Daily</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="Daily"><li><a href="./Daily/2022-10-04" data-for="Daily/2022-10-04">2022-10-04</a></li><li><a href="./Daily/2022-10-09" data-for="Daily/2022-10-09">2022-10-09</a></li><li><a href="./Daily/2023-08-19" data-for="Daily/2023-08-19">2023-08-19</a></li><li><a href="./Daily/2023-08-22" data-for="Daily/2023-08-22">2023-08-22</a></li><li><a href="./Daily/2023-10-15" data-for="Daily/2023-10-15">2023-10-15</a></li><li><a href="./Daily/2023-10-23" data-for="Daily/2023-10-23">2023-10-23</a></li><li><a href="./Daily/2023-10-24" data-for="Daily/2023-10-24">2023-10-24</a></li><li><a href="./Daily/2023-10-25" data-for="Daily/2023-10-25">2023-10-25</a></li><li><a href="./Daily/2023-10-26" data-for="Daily/2023-10-26">2023-10-26</a></li><li><a href="./Daily/2023-10-30" data-for="Daily/2023-10-30">2023-10-30</a></li><li><a href="./Daily/2023-10-31" data-for="Daily/2023-10-31">2023-10-31</a></li><li><a href="./Daily/2023-11-01" data-for="Daily/2023-11-01">2023-11-01</a></li><li><a href="./Daily/2023-11-06" data-for="Daily/2023-11-06">2023-11-06</a></li><li><a href="./Daily/2023-11-08" data-for="Daily/2023-11-08">2023-11-08</a></li><li><a href="./Daily/2023-11-13" data-for="Daily/2023-11-13">2023-11-13</a></li><li><a href="./Daily/2023-11-14" data-for="Daily/2023-11-14">2023-11-14</a></li><li><a href="./Daily/2023-11-19" data-for="Daily/2023-11-19">2023-11-19</a></li><li><a href="./Daily/2023-11-27" data-for="Daily/2023-11-27">2023-11-27</a></li><li><a href="./Daily/2023-11-28" data-for="Daily/2023-11-28">2023-11-28</a></li><li><a href="./Daily/2023-12-01" data-for="Daily/2023-12-01">2023-12-01</a></li><li><a href="./Daily/2023-12-05" data-for="Daily/2023-12-05">2023-12-05</a></li><li><a href="./Daily/2023-12-19" data-for="Daily/2023-12-19">2023-12-19</a></li><li><a href="./Daily/2023-12-20" data-for="Daily/2023-12-20">2023-12-20</a></li><li><a href="./Daily/2023-12-23" data-for="Daily/2023-12-23">2023-12-23</a></li><li><a href="./Daily/2023-12-28" data-for="Daily/2023-12-28">2023-12-28</a></li><li><a href="./Daily/2024-01-06" data-for="Daily/2024-01-06">2024-01-06</a></li><li><a href="./Daily/2024-01-07" data-for="Daily/2024-01-07">2024-01-07</a></li><li><a href="./Daily/2024-01-09" data-for="Daily/2024-01-09">2024-01-09</a></li><li><a href="./Daily/2024-01-18" data-for="Daily/2024-01-18">2024-01-20</a></li><li><a href="./Daily/2024-01-20" data-for="Daily/2024-01-20">2024-01-20</a></li><li><a href="./Daily/2024-02-08" data-for="Daily/2024-02-08">2024-02-08</a></li><li><a href="./Daily/2024-02-10" data-for="Daily/2024-02-10">2024-02-10</a></li><li><a href="./Daily/2024-02-12" data-for="Daily/2024-02-12">2024-02-12</a></li><li><a href="./Daily/2024-02-13" data-for="Daily/2024-02-13">2024-02-13</a></li><li><a href="./Daily/2024-02-15" data-for="Daily/2024-02-15">2024-02-15</a></li><li><a href="./Daily/2024-02-26" data-for="Daily/2024-02-26">2024-02-26</a></li><li><a href="./Daily/2024-03-21" data-for="Daily/2024-03-21">2024-03-21</a></li><li><a href="./Daily/2024-08-12" data-for="Daily/2024-08-12">2024-08-12</a></li><li><a href="./Daily/2024-08-14" data-for="Daily/2024-08-14">2024-08-14</a></li><li><a href="./Daily/2024-08-15" data-for="Daily/2024-08-15">2024-08-15</a></li><li><a href="./Daily/2024-08-16" data-for="Daily/2024-08-16">2024-08-16</a></li><li><a href="./Daily/2024-09-09" data-for="Daily/2024-09-09">2024-09-09</a></li><li><a href="./Daily/2024-09-11" data-for="Daily/2024-09-11">2024-09-11</a></li><li><a href="./Daily/2024-09-13" data-for="Daily/2024-09-13">2024-09-13</a></li><li><a href="./Daily/2024-09-23" data-for="Daily/2024-09-23">2024-09-23</a></li><li><a href="./Daily/2024-10-08" data-for="Daily/2024-10-08">2024-10-08</a></li><li><a href="./Daily/2024-10-19" data-for="Daily/2024-10-19">2024-10-19</a></li><li><a href="./Daily/2024-11-12" data-for="Daily/2024-11-12">2024-11-12</a></li><li><a href="./Daily/2024-11-13" data-for="Daily/2024-11-13">2024-11-13</a></li><li><a href="./Daily/2024-11-24" data-for="Daily/2024-11-24">2024-11-24</a></li><li><a href="./Daily/2024-12-06" data-for="Daily/2024-12-06">2024-12-06</a></li><li><a href="./Daily/2024-12-10" data-for="Daily/2024-12-10">2024-12-10</a></li><li><a href="./Daily/2024-12-23" data-for="Daily/2024-12-23">2024-12-23</a></li><li><a href="./Daily/2024-12-29" data-for="Daily/2024-12-29">2024-12-29</a></li></ul></div></li><li><a href="./01èƒŒåŒ…" data-for="01èƒŒåŒ…">01èƒŒåŒ…</a></li><li><a href="./6840" data-for="6840">6840</a></li><li><a href="./ç¼–è¯‘åŸç†" data-for="ç¼–è¯‘åŸç†">ç¼–è¯‘åŸç†</a></li><li><a href="./æ“ä½œç³»ç»Ÿ" data-for="æ“ä½œç³»ç»Ÿ">æ“ä½œç³»ç»Ÿ</a></li><li><a href="./åŠ¨æ€è§„åˆ’" data-for="åŠ¨æ€è§„åˆ’">åŠ¨æ€è§„åˆ’</a></li><li><a href="./å¤šé‡èƒŒåŒ…" data-for="å¤šé‡èƒŒåŒ…">å¤šé‡èƒŒåŒ…</a></li><li><a href="./åˆ†ç»„èƒŒåŒ…" data-for="åˆ†ç»„èƒŒåŒ…">åˆ†ç»„èƒŒåŒ…</a></li><li><a href="./è®¡ç®—æœºå›¾å½¢å­¦" data-for="è®¡ç®—æœºå›¾å½¢å­¦">è®¡ç®—æœºå›¾å½¢å­¦</a></li><li><a href="./ç®—æ³•" data-for="ç®—æ³•">ç®—æ³•</a></li><li><a href="./å›¾å›¾" data-for="å›¾å›¾">å›¾å›¾</a></li><li><a href="./å®Œå…¨èƒŒåŒ…" data-for="å®Œå…¨èƒŒåŒ…">å®Œå…¨èƒŒåŒ…</a></li><li><a href="./bsdiff" data-for="bsdiff">bsdiff</a></li><li><a href="./BST" data-for="BST">BST</a></li><li><a href="./c" data-for="c">c</a></li><li><a href="./CLRS" data-for="CLRS">CLRS</a></li><li><a href="./CMU-15-445" data-for="CMU-15-445">CMU 15-445</a></li><li><a href="./cpp" data-for="cpp">cpp</a></li><li><a href="./csapp" data-for="csapp">csapp</a></li><li><a href="./csharp" data-for="csharp">csharp</a></li><li><a href="./ddia" data-for="ddia">ddia</a></li><li><a href="./git" data-for="git">git</a></li><li><a href="./IAD" data-for="IAD">IAD</a></li><li><a href="./IOç¼“å†²" data-for="IOç¼“å†²">IOç¼“å†²</a></li><li><a href="./java" data-for="java">java</a></li><li><a href="./leveldb" data-for="leveldb">leveldb</a></li><li><a href="./libc" data-for="libc">libc</a></li><li><a href="./make" data-for="make">make</a></li><li><a href="./nemu" data-for="nemu">nemu</a></li><li><a href="./Obsidian" data-for="Obsidian">Obsidian</a></li><li><a href="./python" data-for="python">python</a></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="./">Home</a><p> â¯ </p></div><div class="breadcrumb-element"><a href>CMU 15-445</a></div></nav><h1 class="article-title">CMU 15-445</h1><p show-comma="true" class="content-meta"><time datetime="2024-07-20T12:08:04.400Z">2024å¹´7æœˆ20æ—¥</time><span>18åˆ†é’Ÿé˜…è¯»</span></p></div></div><article class="popover-hint"><p>data model</p>
<p>å…³ç³»ï¼ŒK/Vï¼Œå›¾ç­‰ç­‰</p>
<p>schema</p>
<p>entityå’Œä»–ä»¬çš„attribute</p>
<p>relational algebraæ˜¯procedureçš„</p>
<p>SQL</p>
<p>windows function<del>ä¸ºæ¯ä¸€è¡Œè®¡ç®—ä¸€ä¸ªæ–°å€¼ï¼Ÿ</del></p>
<p>å¯ä»¥ç”¨æ¥å¾—åˆ°è¡Œå·ï¼Œæ’årank</p>
<p>mmap</p>
<p>è®©OSè´Ÿè´£å†…å­˜å’Œå¤–å­˜çš„é¡µäº¤æ¢</p>
<p>ä¸å»ºè®®</p>
<p>DBMSç®¡ç†ä¸€ç³»åˆ—çš„pageä½œä¸ºå­˜å‚¨å•å…ƒ</p>
<p>æ‰¾åˆ°pageçš„æ–¹æ³•å¯ä»¥æ˜¯é“¾è¡¨æˆ–è€…ç›®å½•å¼</p>
<p>heap</p>
<p>pageä¸­å¦‚ä½•ç»„ç»‡å†…å®¹</p>
<p>1.tuple-oriented</p>
<p><del>strawman è°¬è¯¯åšæ³•</del></p>
<p>å®šé•¿è®°å½•åœ¨blockä¸­çš„ç»„ç»‡æ–¹å¼</p>
<p>åœ¨åˆ é™¤æ—¶é™¤äº†å°†æœ€åçš„è®°å½•ç§»è¿‡æ¥å¡«è¡¥ç©ºä½è¿™ç§åšæ³•ï¼Œè¿˜å¯ä»¥ä¿ç•™ä¸€ä¸ªfile headerï¼Œç»´æŠ¤free listï¼ˆç©ºç¼ºä½ç½®çš„é“¾è¡¨ï¼‰</p>
<p>ä»¥é“¾è¡¨å½¢å¼è®°å½•å¯ç”¨ä½ç½®</p>
<p>slotted page</p>
<p>åœ¨å—ä¸­ç»„ç»‡å˜é•¿è®°å½•</p>
<p><img src="./attachments/Pasted-image-20240122161854.png" width="auto" height="auto" alt/></p>
<p>å½“éœ€è¦ä¿®æ”¹æ—¶åªéœ€è¦ç»´æŠ¤slot arrayä¸­çš„åç§»</p>
<p>æ”¯æŒå¯å˜é•¿</p>
<p>ä¸­é—´å¯èƒ½ä¼šæœ‰ç¢ç‰‡</p>
<p>å¯ä»¥åœ¨postgresä¸­ç®€å•æµ‹è¯•æ£€éªŒè¿™ä¸€è¡Œä¸º</p>
<p>è¿™ç§ç»“æ„è§„å®šäº†ï¼ˆå¤–éƒ¨ï¼Ÿï¼‰åªèƒ½ä¿å­˜æŒ‡å‘å—å¤´ä¸­çš„æŒ‡é’ˆï¼Œè€Œä¸èƒ½ä¿å­˜ç›´æ¥æŒ‡å‘è®°å½•çš„æŒ‡é’ˆï¼ˆå¤§æ¦‚æ˜¯å› ä¸ºtupleä¼šç§»åŠ¨ï¼‰</p>
<p>Problem #1: Fragmentation</p>
<p>â†’ Pages are not fully utilized (unusable space, empty slots).</p>
<p>Problem #2: Useless Disk I/O</p>
<p>â†’ DBMS must fetch entire page to update one tuple.</p>
<p>Problem #3: Random Disk I/O</p>
<p>â†’ Worse case scenario when updating multiple tuples is</p>
<p>that each tuple is on a separate page.</p>
<p>What if the DBMS cannot overwrite data in</p>
<p>pages and could only create new pages?</p>
<p>2.log-structed
æ¯ä¸ªtupleæœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è®°
å†™æ“ä½œæ—¶ï¼Œåªè¿½åŠ PUTæˆ–DELåˆ°æŸä¸ªtupleçš„æ“ä½œæ—¥å¿—ï¼Œä¸å®é™…æ‰§è¡Œ
è¯»æ“ä½œéº»çƒ¦äº†
ä¿ç•™ä¸€ä¸ªæŒ‡å‘æ¯ä¸ªtupleæœ€æ–°çš„æ—¥å¿—çš„ç´¢å¼•ï¼ˆä¸ä¸€å®šå­˜åœ¨æœ€æ–°æ—¥å¿—ï¼‰
å¯ä»¥å‹ç¼©æ—¥å¿—ï¼Œå‹ç¼©ä¹‹åæ¯ä¸ªtupleçš„æ“ä½œè‡³å¤šå‡ºç°ä¸€æ¬¡ï¼Œå­˜å‚¨åˆ°ç£ç›˜ä¸Šçš„æ—¶å€™å¯ä»¥æ”¾å¼ƒæ—¶åºä¿¡æ¯ï¼Œè€Œæ˜¯æŒ‰ä»–ä»¬çš„idæ’åºï¼Œä¾¿äºè¯»å–</p>
<p>å‹ç¼©æ–¹æ³•</p>
<p>universal å½’å¹¶ï¼Ÿ</p>
<p>level å±‚çº§çš„ï¼Ÿ</p>
<p>æœ‰å†™æ”¾å¤§é—®é¢˜</p>
<p>ä¸€æ¬¡é€»è¾‘å†™å˜æˆå¾ˆå¤šæ¬¡ç‰©ç†å†™</p>
<p>3.index-organized</p>
<p>tupleä¸­å¦‚ä½•ç»„ç»‡å†…å®¹</p>
<p>é˜²æ­¢è·¨å­—è¯»å– å¡«å……å’Œé‡æ’åº</p>
<p>ç°æœ‰æ•°æ®åº“å¦‚ä½•å¤„ç†numeric</p>
<p>NULLæ ‡è®° æ¨èæ–¹æ³• bitmap</p>
<p>å¤§æ–‡ä»¶çš„å­˜å‚¨</p>
<p>workload</p>
<p><img src="./attachments/Pasted-image-20240122210801.png" width="auto" height="auto" alt/></p>
<p>NSM</p>
<p>DSM</p>
<p>ä¸€ä¸ªblockåªå­˜ä¸€ä¸ªå±æ€§ï¼ˆcolumn storeï¼‰</p>
<p>PAX</p>
<p>row group</p>
<p>column chunk</p>
<p>åœ¨row groupä¸­column store</p>
<h3 id="æé«˜ioæ•ˆç‡">æé«˜I/Oæ•ˆç‡<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#æé«˜ioæ•ˆç‡" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>i/oæ˜¯æ•°æ®åº“ç“¶é¢ˆ</p>
<p>é€šè¿‡å‹ç¼©æ¥æé«˜IOæ•ˆç‡</p>
<p>naive compression</p>
<p>ä½¿ç”¨é€šç”¨å‹ç¼©æŠ€æœ¯ï¼ŒåŒæ—¶æ„å‘³ç€DBMSä¸èƒ½ç†è§£å‹ç¼©åçš„æ•°æ®</p>
<p>zstd</p>
<p>å¸Œæœ›ä¸ç”¨è§£å‹ç¼©å°±èƒ½æ“ä½œæ•°æ®ï¼Œå°†æ“ä½œè½¬æ¢ä¸ºç­‰ä»·çš„å‹ç¼©åçš„è¡¨ç¤º</p>
<p>column level</p>
<p>å¯ä»¥æ··åˆä½¿ç”¨å¤šç§ç­–ç•¥</p>
<p>run-length encoding</p>
<p>RLE Triplet</p>
<p>value,offset,length</p>
<p>æŠŠç›¸é‚»çš„ç›¸åŒvalueçš„å€¼åˆå¹¶</p>
<p>æ’åºåæ•ˆæœæ›´å¥½</p>
<p>bit packing</p>
<p>ä½¿ç”¨ç©ºé—´æ¯”å£°æ˜æ‰€éœ€çš„ç©ºé—´å°ï¼ˆint32ï¼Œä½†æ˜¯æ•°å¾ˆå°ï¼‰</p>
<p>ä¸¢æ‰æ²¡æœ‰ä½¿ç”¨çš„ä½ï¼ˆè½¬ä¸ºint8ï¼‰</p>
<p>mostly encoding</p>
<p>å…è®¸bit packingä¸­å‡ºç°ä¸€äº›ç¡®å®ä½¿ç”¨äº†å¾ˆå¤šç©ºé—´çš„å€¼çš„ç‰¹ä¾‹</p>
<p>æŠŠä»–ä»¬è®¾ç½®ä¸ºç‰¹æ®Šå€¼ï¼ˆå³æŒ‡ç¤ºä»å­—å…¸æŸ¥ï¼‰ï¼Œå•ç‹¬ç”¨å­—å…¸å­˜å‚¨</p>
<p><img src="./attachments/Pasted-image-20240429140334.png" width="auto" height="auto" alt/></p>
<p>bitmap encoding</p>
<p>å¯¹ä¸€ä¸ªå±æ€§çš„æ¯ä¸ªå–å€¼ï¼Œä½¿ç”¨ä¸€ä¸ªbitæ¥å¯¹åº”</p>
<p>é€‚åˆå–å€¼æƒ…å†µæå°‘çš„</p>
<p>delta encoding</p>
<p>å­˜å‚¨å‰ç¼€å’Œè¡¨</p>
<p>dictionary encoding</p>
<p>å¸¸ç”¨</p>
<p>å¸Œæœ›å­—å…¸çš„é”®ï¼ˆå‹ç¼©è¡¨ç¤ºï¼‰æœ‰å’Œå€¼ï¼ˆåŸå€¼ï¼‰ä¸€æ ·çš„orderingæ¥è¿›è¡Œç‚¹æŸ¥è¯¢å’ŒèŒƒå›´æŸ¥è¯¢ ä¿åº</p>
<p>å­—å…¸è¦æ”¯æŒå‹ç¼©å’Œè§£å‹</p>
<p>è§£å‹æ˜¯å¸¸è§„çš„ï¼Œä»é”®å¾—åˆ°å€¼</p>
<p>å‹ç¼©æ˜¯ä¸ºäº†è®©æˆ‘ä»¬åšåˆ°å‰é¢è¯´çš„æŠŠæ“ä½œè½¬æ¢ä¸ºç­‰ä»·çš„å‹ç¼©åè¡¨ç¤º</p>
<h3 id="qwq">qwq<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#qwq" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>å»å“ªé‡Œè¯»å…¥ï¼ˆç©ºé—´å±€éƒ¨æ€§ï¼‰</p>
<p>ä»€ä¹ˆæ—¶å€™è¯»å…¥/å†™å›</p>
<p>multiple bufferpool</p>
<p>å‡å°‘é”äº‰ç”¨ï¼Œå¢åŠ å±€éƒ¨æ€§</p>
<p>prefetch</p>
<p>ä¸ä»…æ˜¯æœ€ç®€å•çš„sequential accesså¯ä»¥ï¼Œindexï¼ˆb+æ ‘ï¼‰çš„è®¿é—®ä¹Ÿå¯ä»¥</p>
<p>scan sharing</p>
<p>åˆå¹¶æ‰«æç›¸åŒè¡¨çš„æŒ‡é’ˆ</p>
<p>continuous scan sharing</p>
<p>æœ‰ä¸€ä¸ªä¸€ç›´å¾ªç¯æ‰«æçš„æŒ‡é’ˆ</p>
<p>éœ€è¦æ—¶è·³ä¸Šå»</p>
<p>bypass</p>
<p>ä¸åœ¨buffer poolä¸­ä¿å­˜ï¼Œåªæ˜¯ä¸´æ—¶è‡ªå·±ä½¿ç”¨å†…å­˜page</p>
<p>LRUå’ŒCLOCKä¸è®°å½•é¢‘ç‡ï¼Œåªè®°å½•äº†æœ€è¿‘è®¿é—®æ—¶é—´</p>
<p>sequential flooding</p>
<p>OLAPä¸­ï¼Œè¯»è¿‡ä¸€æ¬¡çš„pageä¸ä¼šå†è¢«è¯»ï¼Œæœ€è¿‘è®¿é—®çš„æ˜¯æœ€é€‚åˆevictçš„</p>
<p>ä¸€æ¬¡é¡ºåºè¯»å–æŠŠLRUè®°å½•ä¿¡æ¯å…¨éƒ¨å˜æˆæ²¡æœ‰æ„ä¹‰çš„ä¸œè¥¿çš„æ„æ€</p>
<p>LRU-K</p>
<p>å¯èƒ½è¿˜æœ‰ä¸ªè®°å½•é©±é€ä¿¡æ¯çš„cache</p>
<p>ä¸¤ä¸ªè¾…åŠ©ä¼˜åŒ–</p>
<p>localization</p>
<p>queryå±€éƒ¨ä½œåˆ¤æ–­</p>
<p>é˜²æ­¢æ±¡æŸ“</p>
<p>priority hints</p>
<p>dirty pageå¤„ç†</p>
<p>backgrounding writingé»˜é»˜å¤„ç†dirty page</p>
<p>OSå’Œç¡¬ä»¶æœ‰ä¸€äº›æœ€å¤§åŒ–disk bandwidthçš„æœºåˆ¶ä¼šé‡æ’IOè¯·æ±‚</p>
<p>ä½†æ˜¯ä»–ä»¬ä¸çŸ¥é“è¯·æ±‚ä¼˜å…ˆçº§ï¼ˆæ˜¯background writingè¿˜æ˜¯æ›´é‡è¦çš„writingï¼‰(linuxæ”¯æŒä¼˜å…ˆçº§è®¾ç½®ï¼Ÿ)</p>
<p>ä¸€æ ·çš„ï¼ŒDBMSä¼šç»•è¿‡æ“ä½œç³»ç»Ÿçš„IOä½¿ç”¨direct io</p>
<p>fwriteä¸ä¿è¯å†™å…¥åˆ°æ–‡ä»¶ï¼Œåªä¿è¯è¿›å…¥äº†OSçš„cache</p>
<p>fsyncå¯ä»¥ä¿è¯</p>
<p>ä¸ºä»€ä¹ˆfsyncè¦è®¾è®¡æˆfailä¹‹åå°†dirty pageè®¾ç½®ä¸ºclean</p>
<p>ï¼ˆå‰æå¯èƒ½æ˜¯è®¤ä¸ºfsync failä»£è¡¨é‚£ä¸ªè®¾å¤‡ç¦»å¼€äº†ï¼‰1ä¸ªuç›˜è¢«æ‹”å‡ºäº†fsyncå¤±è´¥ï¼Œè„çš„é¡µæ²¡å¿…è¦ç»§ç»­ä¸ºä»–ç»§ç»­ä¿ç•™</p>
<p><img src="./attachments/Pasted-image-20240203191132.png" width="auto" height="auto" alt/></p>
<h3 id="hash-table">hash table<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hash-table" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>å¹³å‡æ—¶é—´å¤æ‚åº¦ O(1)</p>
<p>ä½†æ˜¯åœ¨DBMSä¸­å¸¸æ•°matter</p>
<h4 id="hash-function">hash function<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hash-function" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>å¦‚ä½•æ˜ å°„</p>
<p>å¿«é€Ÿæ˜ å°„å’Œç¢°æ’ç‡çš„trade-off</p>
<p>facebook xxhash3</p>
<h4 id="hash-scheme">hash scheme<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#hash-scheme" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>å¦‚ä½•è§£å†³å†²çª</p>
<p>åˆ†é…å¤§å“ˆå¸Œè¡¨å’Œå¢åŠ get/putæ‰€éœ€æ“ä½œä¹‹é—´çš„trade-off</p>
<h5 id="static-hashing-scheme">static hashing scheme<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#static-hashing-scheme" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h5>
<p>å¦‚æœç©ºé—´ä¸å¤Ÿï¼Œé‡æ–°åˆ›å»ºhash table</p>
<p><span class="text-highlight">linear probe</span></p>
<p>å¦‚ä½•å¤„ç†åˆ é™¤</p>
<p>#1 <span class="text-highlight">tombstone</span></p>
<p>#2 move ï¼ˆåº”è¯¥æ˜¯æŒ‡æŠŠç©ºä½å¡«å……ä¸Šï¼‰</p>
<p>å¦‚ä½•å¤„ç†non-unique keys</p>
<p>#1 seperate linked list å­˜å‚¨ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­˜å‚¨æ‰€æœ‰å¯èƒ½å€¼çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯å­˜å‚¨å€¼æœ¬èº«</p>
<p>#2 redundant keys ç›´æ¥ä¸€èµ·æ”¾é‡å¤å€¼ï¼ˆä¼¼ä¹å…¼å®¹linear probingï¼ˆï¼Ÿï¼‰ï¼‰</p>
<p>cuckoo</p>
<p><del>é¸Ÿåœ¨åˆ«äººçš„çªä¸‹è›‹</del></p>
<p>ä½¿ç”¨åŒä¸€ä¸ªalgorithmçš„ä¸åŒseedç‰ˆæœ¬çš„<span class="text-highlight">å¤šä¸ªhash functions</span></p>
<p>å¦‚æœæ²¡æœ‰ä½ç½®ï¼Œé©±é€ä¸€ä¸ªå…ƒç´ ç»™å®ƒé‡æ–°æ‰¾ä½ç½®</p>
<p>ç¼ºç‚¹ éœ€è¦åšrandom io</p>
<p><span class="text-highlight">swiss tables</span></p>
<p>robin hood</p>
<p>hopscotch</p>
<h5 id="dynamic-hashing-scheme">dynamic hashing scheme<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#dynamic-hashing-scheme" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h5>
<p>chained hashing</p>
<p>æ¯ä¸ªbucketä¿å­˜ä¸€ä¸ªé“¾è¡¨ï¼Œçº¿æ€§æŸ¥æ‰¾key</p>
<p>ä¼˜åŒ– ä¸ºæ¯ä¸ªbucketæ·»åŠ ä¸€ä¸ªbloom filteræŒ‡ç¤ºæŸä¸ªé”®æ˜¯å¦å­˜åœ¨ é¿å…ä¸å­˜åœ¨æƒ…å†µä¸‹çš„æ— æ•ˆéå†</p>
<blockquote class="callout notes" data-callout="notes">
<div class="callout-title">
                  <div class="callout-icon"></div>
                  <div class="callout-title-inner"><p>Notes</p></div>
                  
                </div>
<div class="callout-content">
<p>bloom filter
æ˜¯ä¸€ç§probabilisticæ•°æ®ç»“æ„ï¼Œä¸ä¼šå‡ºç°false negativesä½†å¯èƒ½å‡ºç°false positives
ç”±bitmapå’Œå¤šä¸ªhash functionç»„æˆ
insertæ—¶å°†é”®è®¡ç®—å¤šä¸ªhash functionï¼Œå¯¹bitmapé•¿åº¦å–æ¨¡ï¼Œå¯¹åº”ä½è®¾ç½®1
lookupæ—¶æ£€æŸ¥
ä¸æ”¯æŒdelete</p>
</div>
</blockquote>
<p>extendible hashing</p>
<p>é¿å…chained hashingä¸­çš„listå˜å¾—è¿‡é•¿</p>
<p>å±€éƒ¨çš„incremental rehashing</p>
<p>å›¾ä¸­å±•ç¤ºäº†local depth=global depthæ—¶çš„ç­–ç•¥ï¼Œå³global depthç¿»å€</p>
<p>è¿™é‡Œæ˜¯å‰ç¼€</p>
<p><img src="./attachments/Pasted-image-20240203234020.png" width="auto" height="auto" alt/></p>
<p><img src="./attachments/Pasted-image-20240203234221.png" width="auto" height="auto" alt/></p>
<p>linear hashing</p>
<p>åˆ†æ‘Š</p>
<p>overflowæ—¶rehash split pointeræŒ‡å‘çš„</p>
<p>æ ¹æ®å½“å‰hashçš„å’Œsplit pointerçš„å…³ç³»ï¼ˆå›¾ä¸­æ˜¯ä¸Šä¸‹å…³ç³»ï¼‰é€‰æ‹©åº”è¯¥ç”¨å“ªä¸ªhash function</p>
<p>å…·ä½“åšæ³•å¯èƒ½æ˜¯å…ˆç”¨æ—§çš„functionè¯•ï¼Œå¦‚æœæ˜ å°„åˆ°äº†split pointerä¸Šæ–¹çš„æ¡†å°±è¯´æ˜å¾—ç”¨æ–°çš„function</p>
<p><img src="./attachments/Pasted-image-20240203235057.png" width="auto" height="auto" alt/></p>
<p>b-tree</p>
<p>ä¸€ç³»åˆ—æ•°æ®ç»“æ„ï¼Œé€šå¸¸æ˜¯æŒ‡balanced</p>
<p>b+-tree</p>
<p>transaction level correctness</p>
<p>å¯èƒ½å¹³æ—¶çº ç»“äº†ä¸Šè¿°æ„ä¹‰ä¸‹çš„å¹¶å‘æ­£ç¡®æ€§ï¼Œå¯¹äºæ•°æ®ç»“æ„çš„å®ç°ä¼¼ä¹åªéœ€è¦ä¿è¯ä¸‹é¢çš„æ­£ç¡®æ€§ï¼ˆå¤§æ¦‚æ˜¯æŒ‡ä¸€ä¸ªå†™è€…æˆ–ä»»æ„å¤šä¸ªè¯»è€…ï¼‰</p>
<p>data structure level correctness</p>
<p>latch crabbing/coupling</p>
<p>ä¹è§‚é”</p>
<p>å‡è®¾å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦merge/splitï¼Œä¸éœ€è¦æŒæœ‰çˆ¶èŠ‚ç‚¹çš„å†™é”ï¼Œä½¿ç”¨è¯»é”ä¸€è·¯éå†åˆ°å¶èŠ‚ç‚¹å†åˆ¤æ–­</p>
<p>åœ¨ä¸€èˆ¬çš„b+æ ‘ä¸­ï¼Œç”±äºéå†é¡ºåºéƒ½æ˜¯è‡ªé¡¶å‘ä¸‹ï¼Œä¸å­˜åœ¨æ­»é”</p>
<p>ä½†æ˜¯å¦‚æœåœ¨ç›¸åŒå±‚çº§çš„èŠ‚ç‚¹ä¹‹é—´å»ºç«‹æ¨ªå‘è¿æ¥ï¼Œå¯èƒ½å‡ºç°æ­»é”ï¼Œå¹¶ä¸”ï¼ˆç”±äºthreadé€šä¿¡/ç»´æŠ¤threadåœ¨åšä»€ä¹ˆè¿™ä»¶äº‹ä»£ä»·å¾ˆå¤§ï¼‰å‡è®¾æ²¡æœ‰ä¸€ç§ä¸­å¿ƒåŒ–çš„æ§åˆ¶ï¼Œå½“å‡ºç°å¾—ä¸åˆ°é”çš„æƒ…å†µï¼Œä¸å…¶ç­‰å¾…ï¼Œæˆ‘ä»¬é€‰æ‹©çš„ç­–ç•¥æ˜¯æ€æ‰è‡ªå·±ï¼Œæ’¤é”€è‡ªå·±åšçš„ã€‚</p>
<p>å¤–éƒ¨æ’åºç®—æ³•æ€è·¯<br/>
åˆ†æ²»<br/>
å¦‚ä½•å­˜å‚¨ä¸­é—´ç»“æœ<br/>
key/valueçš„pairï¼Œå…¶ä¸­keyæ˜¯æ’åºåŸºå‡†ï¼Œvalueæ˜¯tuple<br/>
row storeå€¾å‘äºåœ¨ä¸­é—´ç»“æœä¸­ç›´æ¥ä¿å­˜tupleæœ¬èº«ï¼Œå› ä¸ºstoreçš„æ—¶å€™å°±æ˜¯è¿™æ ·çš„<br/>
col storeæ˜¯å­˜å‚¨record id<br/>
å‰è€…ç§°ä¸ºearly materializationï¼Œåè€…ç§°ä¸ºlate</p>
<p><img src="./attachments/Pasted-image-20240222001541.png" width="auto" height="auto" alt/></p>
<p>2-way mergeåªéœ€è¦bpmä¸­èƒ½å­˜æ”¾ä¸‰ä¸ªpageï¼Œä¸¤ä¸ªç”¨äºè¯»ï¼Œä¸€ä¸ªç”¨äºå†™<br/>
n pageéœ€è¦passæ•°ä¸º1+log2Nä¸Šå–æ•´<br/>
ioèŠ±è´¹æ˜¯2n * pass</p>
<p>æ›´å¤§çš„å†…å­˜<br/>
å¯ä»¥ç›´æ¥in memoryåšï¼Œè·³è¿‡å‡ ä¸ªrun<br/>
å¯ä»¥æ›´å¤šway<br/>
æ ‘æ›´èƒ–æ›´çŸ®</p>
<p>double buffering<br/>
é‡å ioå’Œcpu<br/>
ä¸å…¶å¢å¤§wayæ•°ï¼ˆï¼Ÿï¼‰ï¼Œé€‰æ‹©ç•™ä¸€åŠçš„bpm pageç”¨æ¥åšåŒç¼“å†²ï¼Œcpuå½’å¹¶çš„æ—¶å€™ï¼Œç£ç›˜å¯ä»¥è¯»åˆ°å¦ä¸€åŠä¸ºä¸‹ä¸€æ¬¡å½’å¹¶åšå‡†å¤‡<br/>
èƒ½ä¼˜åŒ–å“åº”æ—¶é—´ ä¸å¤ªå½±å“ååé‡ï¼ˆï¼Ÿï¼‰è¿™ç‚¹è¿˜ä¸å¤ªèƒ½è¾¨æ</p>
<p>æ¯”è¾ƒä¼˜åŒ–<br/>
ä½¿ç”¨hardcodeçš„sort funcï¼ˆc++æ¨¡æ¿ç¼–ç¨‹æŠ€æœ¯ï¼‰è€Œä¸æ˜¯ä¼ é€’å‡½æ•°æŒ‡é’ˆç»™é€šç”¨æ’åºå‡½æ•°<br/>
suffix trunctation<br/>
å­—ç¬¦ä¸²æ¯”è¾ƒå…ˆä½¿ç”¨ä¸€ä¸ªbinary prefixï¼Œç›¸ç­‰äº†fallbackåˆ°æ­£å¸¸çš„å®Œæ•´æ¯”è¾ƒ</p>
<p>ä½¿ç”¨b-treeåŠ é€Ÿ<br/>
bæ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨äº†record id</p>
<p>clusteredä¿è¯äº†é™„è¿‘å¶å­çš„recordéƒ½åœ¨ä¸€ä¸ªpageä¸Šï¼Œä»å·¦åˆ°å³éå†å¶èŠ‚ç‚¹æ¯”å¤–éƒ¨æ’åºæ˜¾ç„¶æ›´å¿«  unclusteredçš„è¯è¿˜æ˜¯ä¸è¦è¿™æ ·éå†çš„ç”¨äº†ï¼Œrandom ioå¤ª</p>
<p>group byå’Œdistinctå¹¶ä¸ä¸€å®šéœ€è¦sortingæ¥åšï¼Œå¯ä»¥ç”¨hashingæ¥åš<br/>
è¿™é‡Œæ˜¯å…ˆâ€œä¸€åˆ†å¤šâ€ï¼Œb-1ä¸ªpageç”¨æ¥è¾“å‡º</p>
<p>Partitionï¼šé¦–å…ˆä½¿ç”¨å“ˆå¸Œå‡½æ•°h1å°†æ‰€æœ‰tupleæŒ‰ç…§keyæ”¾è¿›ä¸åŒçš„åˆ†åŒºï¼ˆåˆ†åŒºå¤§å°èƒ½ä¿è¯èƒ½åœ¨å†…å­˜é‡Œæ“ä½œï¼Œh1ä¿è¯äº†ç›¸åŒå“ˆå¸Œçš„éƒ½è¢«èšé›†åœ¨è¿™ä¸ªåˆ†åŒºäº†ï¼‰<br/>
ReHashï¼šå¯¹äºæ¯ä¸€ä¸ªåˆ†åŒºï¼Œä½¿ç”¨å“ˆå¸Œå‡½æ•°h2åœ¨å†…å­˜ä¸­å»ºç«‹å“ˆå¸Œè¡¨ï¼Œå¹¶ç»´æŠ¤èšåˆæ‰€éœ€ä¿¡æ¯ï¼ˆå¦‚æœ€å°å€¼ã€æ€»å’Œç­‰ï¼‰</p>
<p>early/late materialization</p>
<p>joinæ—¶åˆ›å»ºè¡¨æ ¼çš„å¤åˆ¶ å¯é¢„æµ‹çš„io</p>
<p>è¿™é‡Œå¯é¢„æµ‹ä¸ªäººç†è§£æ˜¯æŒ‡tupleçš„æ•°é‡ï¼Œä½ç½®ä¸ç¡®å®šï¼Œå¯¹ç£ç›˜ä¸å‹å¥½</p>
<p>joinæ—¶åªè®°å½•tupleçš„å”¯ä¸€æ ‡è¯†ç¬¦ ä¸å¯é¢„æµ‹çš„io</p>
<p>naive nested loop join</p>
<p>block nested loop join</p>
<p>RxS ä½¿ç”¨B-2ä¸ªé¡µé¢ç¼“å­˜Rï¼Œ1ä¸ªé¡µé¢è¯»å…¥Sï¼Œè¿™æ ·åŒæ—¶æœ‰æ›´å¤šçš„é¡µé¢åœ¨å†…å­˜ä¸­ï¼Œä»–ä»¬ä¸€èµ·å’Œè¯»å…¥çš„Såšjoin</p>
<p>index nested loop join</p>
<p>process model</p>
<p>å‡½æ•°è°ƒç”¨ï¼ŒæŒ‡ä»¤ç¼“å­˜ä¸å‹å¥½<br/>
å®¹æ˜“å‡ºç°pipeline breaker<br/>
materialization<br/>
vecterization<br/>
ä»‹äºå‰ä¸¤è€…ä¹‹é—´ï¼Œå¯ä»¥ä½¿ç”¨simdä¼˜åŒ–</p>
<p>access model<br/>
seq scan</p>
<p>éå†tableçš„æ‰€æœ‰pageä¸­çš„æ‰€æœ‰tuple<br/>
ä¼˜åŒ–æ–¹å¼ Data skipping</p>
<p>å®ç°æ–¹å¼ Approximate Queries å’Œ Zone Maps</p>
<p>Zone mapç»Ÿè®¡äº†è¯¥zoneä¸‹çš„ä¸€äº›ç‰¹å¾ï¼Œå¦‚å¹³å‡å€¼</p>
<p>zone mapå’Œzoneæœ¬èº«ä¸€èµ·ä¿å­˜ï¼Œä¸èŠ‚çœioï¼Œä½†æ˜¯èŠ‚çœcpu</p>
<p>å¦‚æœä¸å’Œzoneä¸€èµ·ä¿å­˜ï¼Œç»´æŠ¤æ›´éº»çƒ¦ï¼Œä½†æ˜¯èŠ‚çœcpuå’Œio</p>
<p>halloween problem<br/>
æ›´æ–°æ“ä½œé‡å¤æ›´æ–°ä¸€ä¸ªtupleå¤šæ¬¡</p>
<p>è§£å†³æ–¹æ³• è¿½è¸ªè¦ä¿®æ”¹çš„record id</p>
<p>expression evaluationä¼˜åŒ–</p>
<p>å¸¸è§„æ–¹æ³•æ˜¯æ ‘çš„éå†</p>
<p>æ›´å¥½çš„æ–¹æ³•æ˜¯å³æ—¶ç¼–è¯‘å‡ºè®¡ç®—è¡¨è¾¾å¼çš„å‡½æ•°</p>
<p>index scan</p>
<p>query planning<br/>
catalogè®°å½•äº†æ‰€æœ‰è¡¨æ ¼çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆè®°å½•æ•°ï¼Œpageæ•°ï¼‰ï¼Œç´¢å¼•<br/>
ä¼°ç®—æ¯ä¸ªæŸ¥è¯¢è®¡åˆ’çš„ioï¼ˆè¯»å†™é¡µæ¬¡æ•°ï¼‰<br/>
vectorization(ä½¿ç”¨ç®¡é“)é¿å…äº†æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸å¿…è¦çš„materializationï¼Œå‡å°‘io</p>
<p>å¾—åˆ°çš„æŸ¥è¯¢æ ‘éœ€è¦è½¬ä¸ºphysical planï¼ˆè¿™ä¸ªè½¬åŒ–å…³ç³»ä¹Ÿä¸æ˜¯11å¯¹åº”ï¼‰å‘é€ç»™scheduler</p>
<p>physical planæè¿°äº†access pathï¼ˆç®¡é“ï¼Œscanï¼Œbæ ‘ç­‰ï¼‰å’Œæˆæœ¬ä¼°è®¡</p>
<p>æ‰¾åˆ°æ‰€æœ‰ç­‰ä»·æŸ¥è¯¢æ ‘æ˜¯npéš¾é—®é¢˜</p>
<p>rule base</p>
<p>ä¸éœ€è¦è€ƒè™‘æ•°æ®æƒ…å†µ</p>
<p>å¦‚predicate pushdownï¼Œä½¿ç”¨ç¬›å¡å°”ç§¯</p>
<p>cost base</p>
<p>log_debugå®</p>
<p>transaction</p>
<p>correction criteria ACID</p>
<p>å…¶ä¸­atomicityå’Œpersistencyç”¨undo/redoå®ç°ï¼Œisolationç”¨å¹¶å‘æ§åˆ¶ï¼Œconsistencyç”¨integrity constraint</p>
<p>atomicityå®ç°</p>
<p>logging</p>
<p>shadowing</p>
<p>åœ¨å¤åˆ¶ä¸Šè¿›è¡Œæ“ä½œï¼Œæäº¤æ—¶ä½¿æ“ä½œå¯è§</p>
<p>eventual consistency</p>
<p>ä¿è¯æœ€ç»ˆåˆ°è¾¾ä¸€è‡´çŠ¶æ€ï¼Œä½†å¯èƒ½ä½¿ä¸ä¸€è‡´çŠ¶æ€å¯è§ï¼Ÿå‹åŠ›æ¥åˆ°åº”ç”¨ç¨‹åºå‘˜</p>
<p>serial execution</p>
<p>unrepeatable read åŒä¸€ä¸ªäº‹åŠ¡çš„è¿ç»­ä¸¤æ¬¡è¯»å¾—åˆ°ä¸åŒå€¼ï¼Œè¿èƒŒéš”ç¦»</p>
<p>dirty write è¯»åˆ°æœªæäº¤çš„å€¼</p>
<p>lost update<br/>
<img src="./attachments/Pasted-image-20240307102831.png" width="auto" height="auto" alt/></p>
<p>ä»æ—¶é—´æ›´æ—©çš„æŒ‡å‘æ›´æ™šçš„ï¼Œä¸èƒ½æœ‰ç¯</p>
<p>åˆ»ç”»äº†ä¾èµ–å…³ç³»</p>
<p>ä¸²è¡ŒåŒ–è°ƒåº¦</p>
<p>æœ‰å¤šç§æ’åˆ—é¡ºåºï¼Œä½†éƒ½<span class="text-highlight">è¢«è®¤ä¸ºæ˜¯</span>æ­£ç¡®çš„</p>
<p>ä¸¤æ®µé”åè®®2PL</p>
<p>ç›´è§‰ï¼šä»æ—¶é—´å›¾ä¸Šçœ‹ï¼Œæ¯ä¸ªtransactionè·å–é”çš„æ•°é‡å…ˆä¸Šå‡åä¸‹é™ï¼Œè°å…ˆåˆ°è¾¾lock pointè°å…ˆæ‰§è¡Œï¼Œç”±äºä¾èµ–å›¾ä¸­çš„è¾¹çš„é¡¶ç‚¹è‡³å°‘æœ‰ä¸€ä¸ªå†™ï¼Œä¸¤ä¸ªé¡¶ç‚¹çš„äº‹åŠ¡çš„é”ä¸å…¼å®¹ï¼Œå¿…é¡»ç­‰å¾…ï¼Œä¿è¯äº†ä¾èµ–/é¡ºåºå…³ç³»</p>
<p>æ‚²è§‚åœ°æ‰“ç ´äº†ä¾èµ–å›¾ä¸­çš„è¾¹<br/>
ä»ç„¶ä¼šæœ‰è„è¯»<br/>
ä¸¥æ ¼2PL</p>
<p>OCC</p>
<p>p0è®°å½•<br/>
debugè¿˜æ˜¯ä¸å¤ªä¼šï¼Œä¸çŸ¥é“gdbé‡Œç”¨ä¸€ä¸ªçˆ¶ç±»æŒ‡é’ˆçœ‹ä¸€ä¸ªå­ç±»çš„æ¨¡æ¿å®ä¾‹çš„ä¸€ä¸ªæ¨¡æ¿æˆå‘˜</p>
<p>p1è®°å½•<br/>
newpageå’Œfetchpageçš„æ—¶å€™record accesså³å¯<br/>
ä½†æ˜¯unpinä¹Ÿä¼ å…¥äº†access</p>
<p>p2è®°å½•<br/>
æ¯”è¾ƒç¦»è°±ï¼ŒæŠŠé”çš„è·å–æ”¾åœ¨è¯»å†™guardæ„é€ å‡½æ•°å¤–é¢æ‰è¡Œ<br/>
<del>ç„¶åbpmçš„æ–°åŠ çš„è·å–guardçš„ä¸‰ä¸ªå‡½æ•°ä¹±åŠ é”ï¼ˆæŒ‡ç›´æ¥ä½¿ç”¨scope lockï¼Œèƒ½é€šè¿‡çš„åšæ³•æ˜¯ç›´æ¥è°ƒç”¨åŸæ¥çš„å¤–éƒ¨æ¥å£ï¼Œå› ä¸ºå®ƒå·²ç»ä¸Šé”äº†ï¼‰ä¹Ÿä¼šå‡ºé—®é¢˜</del><br/>
æ²¡æ­£ç¡®ç†è§£è¦æ±‚ä¸­åˆå¹¶çš„å‰æï¼ˆä»¥ä¸ºæ˜¯ä¸¤ä¸ªéƒ½ä¸ºç©ºæ‰èƒ½åˆå¹¶ï¼‰<br/>
å†™äº†ä¸ªè¾¹è¿­ä»£è¾¹ä¿®æ”¹å®¹å™¨çš„bug<br/>
æ²¡è¿‡qps testæ˜¯å› ä¸ºremoveçš„æ—¶å€™æ²¡æœ‰åœ¨å·²ç»å­˜åœ¨è¯¥keyæ—¶ç›´æ¥return false</p>
<p>p3è®°å½•<br/>
seq-scanæ‰§è¡Œä¸­ç”¨åˆ°äº†catalogæä¾›çš„tableheapä¸­æä¾›çš„iteratorï¼Œä¸çŸ¥é“bpmçš„æ“ä½œæ˜¯è°åšçš„</p>
<p>è‰¯å¥½çš„practice<br/>
åœ¨å¤´æ–‡ä»¶ä¸Šæ–¹ç»˜åˆ¶äº†æ•°æ®ç»“æ„åœ¨å†…å­˜ä¸­çš„ç¤ºæ„å›¾<br/>
æä¾›äº†æ‰“å°æ¯ç§pageä¿¡æ¯çš„å‡½æ•°<br/>
integrity check</p>
<p>å­˜å‚¨éƒ¨åˆ†çš„ä¸»è¦ç›®çš„ï¼šhide latency</p>
<p>å¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªpage</p>
<p>æ¯ä¸ªpageéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„identifierï¼Œå¸¸è§çš„ç»„ç»‡é¡µé¢çš„å®ç°æ–¹æ³•æ˜¯heap</p>
<p>tuple-based, index-based, log-based  NSM</p>
<p>OLTP</p>
<p>N S M : S U M M A R Y</p>
<p>Advantages</p>
<p>â†’ Fast inserts, updates, and deletes.</p>
<p>â†’ Good for queries that need the entire tuple (OLTP).</p>
<p>â†’ Can use index-oriented physical storage for clustering.</p>
<p>Disadvantages</p>
<p>â†’ Not good for scanning large portions of the table and/or a subset of the attributes.</p>
<p>â†’ Terrible memory locality in access patterns.</p>
<p>â†’ Not ideal for compression because of multiple value domains within a single page.</p>
<p>D E C O M P O S I T I O N S TO R AG E M O D E L ( D S M )</p>
<p>Advantages</p>
<p>â†’ Reduces the amount wasted I/O per query because the DBMS only reads the data that it needs.</p>
<p>â†’ Faster query processing because of increased locality and cached data reuse.</p>
<p>â†’ Better data compression (more on this later)</p>
<p>Disadvantages</p>
<p>â†’ Slow for point queries, inserts, updates, and deletes because of tuple splitting/stitching/reorganization.</p>
<p>ä¸ºä»€ä¹ˆmvccå†™ä¸é˜»å¡è¯»</p>
<p>mvccå­˜åœ¨write skew anomaly</p></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>å…³ç³»å›¾è°±</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class aria-controls="toc-content" aria-expanded="true"><h3>ç›®å½•</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content" class><ul class="overflow"><li class="depth-0"><a href="#æé«˜ioæ•ˆç‡" data-for="æé«˜ioæ•ˆç‡">æé«˜I/Oæ•ˆç‡</a></li><li class="depth-0"><a href="#qwq" data-for="qwq">qwq</a></li><li class="depth-0"><a href="#hash-table" data-for="hash-table">hash table</a></li></ul></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.4.0</a> Â© 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="./postscript.js" type="module"></script></html>